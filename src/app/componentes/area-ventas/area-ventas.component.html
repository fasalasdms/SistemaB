    <div class="grid grid-cols-2 xl:grid-cols-5 gap-2 mb-4">

        <div class="flex flex-col flex-auto p-2 bg-card rounded-2xl shadow col-span-2">
     
            <form [formGroup]="ventaForm">
                <!--<div class="mr-4 text-lg font-medium tracking-tight leading-6 truncate">Agregar Producto {{indiceVenta}}</div>-->

                <div class="flex w-full flex-col">

                    <mat-form-field appearance="outline" class="w-full text-xl">
                        <mat-label>Codigo de barras </mat-label>
                        <input matInput [formControlName]="'codigo'">
                    </mat-form-field>

                    <div class="flex justify-end -mt-6">
                        <button (click)="agregarProductoVentaSeleccionada()" [disabled]="!ventaForm.valid" mat-button class="bg-[#0D47A1] text-white">
                            Agregar
                            <mat-icon class="text-white" [svgIcon]="'heroicons_outline:plus'"></mat-icon>
                        </button>
                    </div>

                </div>
                
            </form>
        </div>

        <div class="flex flex-col flex-auto p-2 rounded-2xl shadow col-span-3" [ngStyle]="{'background-color': evtProductoAniadido ? '#E3F2FD' : 'white'}">

            <mat-tab-group (selectedTabChange)="tabChanged($event)">
                <mat-tab *ngFor="let venta of ventas" [label]="venta.nombre">

                    <div *ngIf="venta.productos.length==0" class="h-[500px]">
                        <div class="text-xl text-center mt-6 flex justify-center">
                            <mat-icon [svgIcon]="'heroicons_outline:inbox'"></mat-icon>

                            <h3>
                                Sin productos
                            </h3>
                        </div>
                    </div>

                        <div class="my-4 flex flex-col justify-start items-center" *ngIf="venta.productos.length>0">
                            <div class="flex flex-col" *ngIf="venta.nombreCliente">
                                <div class="text-base font-medium tracking-tight truncate"><span class="font-bold">Cliente:</span>{{venta.nombreCliente?venta.nombreCliente:''}}</div>
                            </div>
                            <div class="flex flex-row justify-between items-between w-full">
                                <div class="flex flex-col">
                                    <div class="text-lg font-medium tracking-tight truncate">Listado de Productos</div>
                                </div>
                                <div class="ml-auto">
                                <div class="mr-4 text-lg font-medium tracking-tight truncate">{{venta.productos.length}}</div>
                                </div>
                            </div>
                        </div>

                        <div class="flex flex-col flex-auto overflow-y-scroll h-[500px]" *ngIf="venta.productos.length>0">
                            
                            <!--<div *ngFor="let producto of venta.productos.reverse()" class="mt-3 rounded-2xl shadow w-full p-2 card-venta">

                                <div
                                    class="relative w-full flex flex-col flex-auto overflow-hidden">

                                    <span class="text-lg bg-[#0D47A1] px-1 rounded-xl text-white absolute bottom-0 right-0"><span class="font-medium leading-none">x</span>{{producto?.cantidad}}</span>

                                    <div class="absolute top-0 right-0">
                                        <button mat-icon-button (click)="aumentarCantidad(producto)">
                                            <mat-icon class="icon-size-2"
                                            [svgIcon]="'heroicons_outline:plus-circle'"></mat-icon>
                                        </button>
                                        <button mat-icon-button *ngIf="producto?.cantidad>1" (click)="reducirCantidad(producto)">
                                            <mat-icon class="icon-size-2"
                                            [svgIcon]="'heroicons_outline:minus-circle'"></mat-icon>
                                        </button>
                                        <button mat-icon-button color="warn" (click)="confirmacionModal(producto)" *ngIf="producto?.cantidad==1">
                                            <mat-icon class="icon-size-2"
                                            [svgIcon]="'heroicons_outline:trash'"></mat-icon>
                                        </button>
                                    </div>

                                    <div class="flex items-center">
                                        <div class="flex flex-col">
                                            <div class="tracking-tight leading-6 truncate">
                                                <strong>{{producto?.descripcion}}</strong>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="text-green-600 w-full flex justify-center items-center flex-col">
                                        <div class="text-sm font-medium text-secondary">Dcto</div>
                                        <div class=" flex flex-row">
                                            <span class="bg-[#B2DFDB] rounded-xl px-1 cursor-pointer" (click)="editarCampoModal(producto,setDescuento)">
                                                {{producto?.descuento  | currency:'USD'}}
                                            </span>
                                        </div>
                                    </div>

                                    <div class="flex flex-row justify-between mt-2 -mx-6 w-full">
                                        <div class="flex flex-col mx-6">
                                            <div class="text-sm font-medium text-secondary">
                                                Precio
                                            </div>
                                            <div class="flex flex-row items-center">
                                                <span class="bg-[#E0E0E0] rounded-xl px-1 cursor-pointer" (click)="editarCampoModal(producto,setPrecio)">
                                                    {{producto?.precioProducto | currency:'USD'}}
                                                </span>
                                            </div>
                                        </div>
                                        <div class="flex flex-col mx-6">
                                            <div class="text-sm font-medium text-secondary">Iva</div>
                                            <div class=" flex flex-row items-center">
                                                <span class="bg-[#E0E0E0] rounded-xl px-1 cursor-pointer" (click)="editarCampoModal(producto,setIVA)">
                                                    {{producto?.iva - producto?.precioProducto | currency:'USD'}}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="flex flex-col mx-6 my-1 text-center">
                                        <div class="text-sm font-medium leading-none text-secondary">Total</div>
                                        <div class="mt-2 leading-none text-xl">{{producto?.total | currency:'USD'}}</div>
                                    </div>
                                </div>
                            </div>-->


                            <div style="overflow: auto; height: 500px; padding: 1px !important;" class="flex flex-col flex-auto p-6 bg-card rounded-2xl shadow">
                                <div *ngFor="let producto of venta.productos.reverse()" class="mt-3 space-y-8">
                        
                                       <div class="relative flex flex-col flex-auto p-6 pr-3 pb-3 bg-card rounded-2xl shadow overflow-hidden">
                                            
                                            <div class="absolute top-0 right-0 m-1">
                                                <button mat-icon-button (click)="editarCampoModal(producto,setCantidad)">
                                                    <mat-icon class="icon-size-2"
                                                    [svgIcon]="'heroicons_outline:pencil-alt'"></mat-icon>
                                                </button>
                                                <button mat-icon-button (click)="aumentarCantidad(producto)">
                                                    <mat-icon class="icon-size-2"
                                                    [svgIcon]="'heroicons_outline:plus-circle'"></mat-icon>
                                                </button>
                                                <button mat-icon-button *ngIf="producto?.cantidad>1" (click)="reducirCantidad(producto)">
                                                    <mat-icon class="icon-size-2"
                                                    [svgIcon]="'heroicons_outline:minus-circle'"></mat-icon>
                                                </button>
                                                <button mat-icon-button color="warn" (click)="confirmacionModal(producto)" *ngIf="producto?.cantidad==1">
                                                    <mat-icon class="icon-size-2"
                                                    [svgIcon]="'heroicons_outline:trash'"></mat-icon>
                                                </button>
                                            </div>

                                            <div class="absolute bottom-0 right-0 -mb-6 z-0">
                                                <span class="text-8xl font-bold text-green-400 opacity-50">{{producto?.cantidad}}</span>
                                           </div>
                                           <div class="flex items-center">
                                               <div class="flex flex-col">
                                                   <div class="tracking-tight leading-6 truncate"><strong>{{producto?.descripcion}}</strong></div>
                                                   <div class="text-green-600 font-medium text-lg">
                                                       Total {{producto?.total  | currency:'USD'}}
                                                   </div>
                                               </div>
                                           </div>
                                           <div class="flex flex-row flex-wrap mt-4 -mx-6 z-10">
                                               <div class="flex flex-col mx-4 my-3">
                                                   <div class="text-sm font-medium leading-none text-secondary">Precio</div>
                                                   <div class="mt-2 leading-none"><span class="text-blue-800 bg-blue-100-10 py-0.5 px-3 rounded-full cursor-pointer" (click)="editarCampoModal(producto,setPrecio)">{{producto?.precioProducto | currency:'USD'}}</span></div>
                                               </div>
                                               <div class="flex flex-col mx-4 my-3">
                                                   <div class="text-sm font-medium leading-none text-secondary">Iva</div>
                                                   <div class="mt-2 leading-none"><span class="text-blue-800 bg-blue-100-10 py-0.5 px-3 rounded-full cursor-pointer" (click)="editarCampoModal(producto,setIVA)">{{producto?.iva}}%</span></div>
                                               </div>
                                               <div class="flex flex-col mx-4 my-3">
                                                   <div class="text-sm font-medium leading-none text-secondary">Dcto</div>
                                                   <div class="mt-2 leading-none"><span class="text-blue-800 bg-blue-100-10 py-0.5 px-3 rounded-full cursor-pointer" (click)="editarCampoModal(producto,setDescuento)">{{producto?.descuento  | currency:'USD'}}</span></div>
                                               </div>
                                           </div>
                                       </div>
                                </div>
                            </div>


                        </div>
                </mat-tab>
            </mat-tab-group>
        </div>
    </div>